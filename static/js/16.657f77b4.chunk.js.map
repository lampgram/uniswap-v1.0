{"version":3,"sources":["webpack:///./src/assets/images/plus-blue.svg?eec6","pages/Pool/AddLiquidity.js","components/ContextualInfo/index.js"],"names":["_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","svgRef","title","props","createElement","width","height","viewBox","fill","ref","d","stroke","strokeLinecap","ForwardRef","forwardRef","ALLOWED_SLIPPAGE","ethers","utils","bigNumberify","GAS_MARGIN","BlueSpan","styled","span","theme","royalBlue","NewExchangeWarning","div","NewExchangeWarningText","LastSummaryText","DownArrowBackground","flexRowNoWrap","SummaryPanel","flexColumnNoWrap","ExchangeRateWrapper","doveGray","ExchangeRate","Flex","ColoredWrappedPlus","isError","highSlippageWarning","rest","active","chaliceGray","calculateSlippageBounds","value","offset","mul","minimum","sub","maximum","add","lt","constants","Zero","gt","MaxUint256","calculateMaxOutputVal","initialAddLiquidityState","state","inputValue","ethAmountURL","outputValue","tokenAmountURL","lastEditedField","outputCurrency","tokenURL","addLiquidityStateReducer","action","type","payload","field","getExchangeRate","inputDecimals","outputDecimals","invert","factor","pow","getMarketRate","reserveETH","reserveToken","decimals","AddLiquidity","params","t","useTranslation","useWeb3React","library","account","chainId","urlAddedTokens","token","useEffect","createBrowserHistory","push","window","location","pathname","useReducer","ethAmount","tokenAmount","addLiquidityState","dispatchAddLiquidityState","useState","inputValueParsed","setInputValueParsed","outputValueParsed","setOutputValueParsed","inputError","setInputError","outputError","setOutputError","zeroDecimalError","setZeroDecimalError","brokenTokenWarning","setBrokenTokenWarning","broken777Warning","setBroken777Warning","useTokenDetails","symbol","exchangeAddress","exchangeContract","useExchangeContract","totalPoolTokens","setTotalPoolTokens","fetchPoolTokens","useCallback","totalSupply","then","on","removeListener","poolTokenBalance","useAddressBalance","exchangeETHBalance","exchangeTokenBalance","useExchangeReserves","isNewExchange","isZero","poolTokenPercentage","undefined","ethShare","tokenShare","liquidityMinted","inputBalance","outputBalance","ethPerLiquidityToken","tokenPerLiquidityToken","outputValueMax","liquidityTokensMin","marketRate","useMemo","marketRateInverted","renderTransactionDetails","b","text","amountFormatter","Math","min","addTransaction","useTransactionAdder","a","ethTransactionSize","deadline","ceil","Date","now","estimate","addLiquidity","estimatedGasLimit","gasLimit","calculateGasMargin","response","ReactGA","event","category","label","dimension1","hash","toString","formatBalance","brokenTokens","toLowerCase","broken777Tokens","parsedInputValue","parseUnits","parsedOutputValue","parsedValue","lte","gte","Error","currencyAmount","allowance","useAddressAllowance","showUnlock","setShowUnlock","isActive","isValid","newOutputDetected","INITIAL_TOKENS_CONTEXT","showOutputWarning","setShowOutputWarning","WarningCard","onDismiss","currency","CurrencyInputPanel","extraText","onValueChange","extraTextClickHander","valueToSet","parseEther","selectedTokenAddress","errorMessage","disableTokenSelect","OversizedPanel","alt","description","onCurrencySelected","hideBottom","contextualInfo","ContextualInfo","openDetailsText","closeDetailsText","renderSummary","role","aria-label","style","marginTop","textAlign","disabled","onClick","SummaryWrapper","error","salmonRed","Details","concreteGray","SummaryWrapperContainer","ColoredDropup","ColoredDropdown","showDetails","setState","prevState","renderDetails","Component","defaultProps"],"mappings":"0JAAIA,E,gJAEAC,EAAY,CAAC,SAAU,SAE3B,SAASC,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAASS,EAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxMgB,CAA8BZ,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,I,oBAAI,EAAc,SAAqBoB,GACrC,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACbC,EAAQZ,EAAyBS,EAAMxB,GAE3C,OAAoB,IAAM4B,cAAc,MAAO3B,EAAS,CACtD4B,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,KAAM,OACNC,IAAKR,GACJE,GAAQD,EAAqB,IAAME,cAAc,QAAS,KAAMF,GAAS,KAAM3B,IAAUA,EAAqB,IAAM6B,cAAc,OAAQ,CAC3IM,EAAG,iCACHC,OAAQ,UACRC,cAAe,aAIfC,EAA0B,IAAMC,YAAW,SAAUX,EAAOM,GAC9D,OAAoB,IAAML,cAAc,EAAa3B,EAAS,CAC5DwB,OAAQQ,GACPN,O,GAEU,I,mGCTTY,EAAmBC,SAAOC,MAAMC,aAAa,KAM7CC,EAAaH,SAAOC,MAAMC,aAAa,KAEvCE,EAAWC,IAAOC,KAAV,2CACH,qBAAGC,MAAkBC,aAG1BC,EAAqBJ,IAAOK,IAAV,6LASlBC,EAAyBN,IAAOK,IAAV,4KAWtBE,EAAkBP,IAAOK,IAAV,iDAIfG,EAAsBR,IAAOK,IAAV,uFACrB,qBAAGH,MAAkBO,iBAInBC,EAAeV,IAAOK,IAAV,uDACd,qBAAGH,MAAkBS,oBAInBC,GAAsBZ,IAAOK,IAAV,8HACrB,qBAAGH,MAAkBO,iBAEd,qBAAGP,MAAkBW,YAK1BC,GAAed,IAAOC,KAAV,2EAGP,qBAAGC,MAAkBW,YAG1BE,GAAOf,IAAOK,IAAV,sIAWJW,GAAqBhB,aADP,SAAC,GAAD,EAAGiB,QAAH,EAAYC,oBAAZ,IAAoCC,EAApC,wBAA+C,kBAAC,EAASA,KAClDnB,CAAH,mJAMV,gBAAGoB,EAAH,EAAGA,OAAQlB,EAAX,EAAWA,MAAX,OAAwBkB,EAASlB,EAAMC,UAAYD,EAAMmB,eAIvE,SAASC,GAAwBC,GAC/B,GAAIA,EAAO,CACT,IAAMC,EAASD,EAAME,IAAI/B,GAAkBW,IAAIV,SAAOC,MAAMC,aAAa,MACnE6B,EAAUH,EAAMI,IAAIH,GACpBI,EAAUL,EAAMM,IAAIL,GAC1B,MAAO,CACLE,QAASA,EAAQI,GAAGnC,SAAOoC,UAAUC,MAAQrC,SAAOoC,UAAUC,KAAON,EACrEE,QAASA,EAAQK,GAAGtC,SAAOoC,UAAUG,YAAcvC,SAAOoC,UAAUG,WAAaN,GAGnF,MAAO,GAIX,SAASO,GAAsBZ,GAC7B,GAAIA,EACF,OAAOA,EAAME,IAAI9B,SAAOC,MAAMC,aAAa,MAAQQ,IAAIX,EAAiBmC,IAAIlC,SAAOC,MAAMC,aAAa,OAI1G,SAASuC,GAAyBC,GAChC,MAAO,CACLC,WAAYD,EAAME,aAAeF,EAAME,aAAe,GACtDC,YAAaH,EAAMI,iBAAmBJ,EAAME,aAAeF,EAAMI,eAAiB,GAClFC,gBAAiBL,EAAMI,gBAAyC,KAAvBJ,EAAME,aA5GpC,EADD,EA8GVI,eAAgBN,EAAMO,SAAWP,EAAMO,SAAW,IAItD,SAASC,GAAyBR,EAAOS,GACvC,OAAQA,EAAOC,MACb,IAAK,kBACH,OAAO,2BACFV,GADL,IAEEM,eAAgBG,EAAOE,UAG3B,IAAK,eACH,IAAQV,EAA4BD,EAA5BC,WAAYE,EAAgBH,EAAhBG,YACpB,EAAyBM,EAAOE,QAAxBC,EAAR,EAAQA,MAAO1B,EAAf,EAAeA,MACf,OAAO,2BACFc,GADL,IAEEC,WA/HM,IA+HMW,EAAkB1B,EAAQe,EACtCE,YA/HO,IA+HMS,EAAmB1B,EAAQiB,EACxCE,gBAAiBO,IAGrB,IAAK,yBACH,IAAQX,EAA4BD,EAA5BC,WAAYE,EAAgBH,EAAhBG,YACpB,EAAyBM,EAAOE,QAAxBC,EAAR,EAAQA,MAAO1B,EAAf,EAAeA,MACf,OAAO,2BACFc,GADL,IAEEC,WAzIM,IAyIMW,EAAkB1B,EAAQe,EACtCE,YAzIO,IAyIMS,EAAmB1B,EAAQiB,IAG5C,QACE,OAAOJ,MAKb,SAASc,GAAgBZ,EAAYa,EAAeX,EAAaY,GAAiC,IAAjBC,EAAgB,wDAC/F,IACE,GACEf,IACCa,GAAmC,IAAlBA,IAClBX,IACCY,GAAqC,IAAnBA,GACnB,CACA,IAAME,EAAS3D,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,KAE3E,OAAIwD,EACKf,EACJb,IAAI6B,GACJ7B,IAAI9B,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAauD,KAChE/C,IAAIV,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAasD,KAChE9C,IAAImC,GAEAA,EACJf,IAAI6B,GACJ7B,IAAI9B,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAasD,KAChE9C,IAAIV,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAauD,KAChE/C,IAAIiC,IAGX,WAGJ,SAASkB,GAAcC,EAAYC,EAAcC,GAA2B,IAAjBN,EAAgB,wDACzE,OAAOH,GAAgBO,EAAY,GAAIC,EAAcC,EAAUN,GAGlD,SAASO,GAAT,GAAmC,IAAXC,EAAU,EAAVA,OAC7BC,EAAMC,cAAND,EACR,EAA8CE,cAAtCC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,QAAS9C,EAA1B,EAA0BA,OAAQ+C,EAAlC,EAAkCA,QAE5BC,EAAiB,GACnBP,EAAOQ,QACTD,EAAeP,EAAOQ,QAAS,GAIjCC,qBAAU,WACQC,cACRC,KAAKC,OAAOC,SAASC,SAAW,MACvC,IAEH,MAAuDC,qBACrD/B,GACA,CAAEN,aAAcsB,EAAOgB,UAAWpC,eAAgBoB,EAAOiB,YAAalC,SAAUiB,EAAOQ,OACvFjC,IAHF,mBAAO2C,EAAP,KAA0BC,EAA1B,KAKQ1C,EAA6DyC,EAA7DzC,WAAYE,EAAiDuC,EAAjDvC,YAAaE,EAAoCqC,EAApCrC,gBAAiBC,EAAmBoC,EAAnBpC,eAGlD,EAAgDsC,qBAAhD,mBAAOC,EAAP,KAAyBC,EAAzB,KACA,EAAkDF,qBAAlD,mBAAOG,EAAP,KAA0BC,EAA1B,KACA,EAAoCJ,qBAApC,oBAAOK,GAAP,MAAmBC,GAAnB,MACA,GAAsCN,qBAAtC,qBAAOO,GAAP,MAAoBC,GAApB,MACA,GAAgDR,qBAAhD,qBAAOS,GAAP,MAAyBC,GAAzB,MAEA,GAAoDV,qBAApD,qBAAOW,GAAP,MAA2BC,GAA3B,MACA,GAAgDZ,qBAAhD,qBAAOa,GAAP,MAAyBC,GAAzB,MAEA,GAA8CC,YAAgBrD,GAAtDsD,GAAR,GAAQA,OAAQtC,GAAhB,GAAgBA,SAAUuC,GAA1B,GAA0BA,gBACpBC,GAAmBC,YAAoBF,IAE7C,GAA8CjB,qBAA9C,qBAAOoB,GAAP,MAAwBC,GAAxB,MACMC,GAAkBC,uBAAY,WAC9BL,IACFA,GAAiBM,cAAcC,MAAK,SAAAD,GAClCH,GAAmBG,QAGtB,CAACN,KACJ7B,qBAAU,WAIR,OAHAiC,KACAtC,EAAQ0C,GAAG,QAASJ,IAEb,WACLtC,EAAQ2C,eAAe,QAASL,OAEjC,CAACA,GAAiBtC,IAErB,IAAM4C,GAAmBC,YAAkB5C,EAASgC,IAC9Ca,GAAqBD,YAAkBZ,GAAiB,OACxDc,GAAuBF,YAAkBZ,GAAiBvD,GAEhE,GAAqCsE,YAAoBtE,GAAjDc,GAAR,GAAQA,WAAYC,GAApB,GAAoBA,aACdwD,MAAmBzD,IAAcC,IAAgBD,GAAW0D,UAAYzD,GAAayD,UAGrFC,GACJP,IAAoBR,KAAqC,IAAlBa,KAA4Bb,GAAgBc,SAC/EN,GAAiBpF,IAAI9B,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,MAAMQ,IAAIgG,SAC3FgB,EACAC,GACJP,IAAsBK,GAClBL,GACGtF,IAAI2F,IACJ/G,IAAIV,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,WACnEwH,EACAE,GACJP,IAAwBI,GACpBJ,GACGvF,IAAI2F,IACJ/G,IAAIV,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,WACnEwH,EAEAG,GAAkBN,GACpBhC,EACAmB,IAAmBnB,GAAoB6B,KAAuBA,GAAmBI,SACjFd,GAAgB5E,IAAIyD,GAAkB7E,IAAI0G,SAC1CM,EAGEI,GAAeX,YAAkB5C,EA/DjB,OAgEhBwD,GAAgBZ,YAAkB5C,EAASvB,GAE3CgF,GACJZ,IAAsBV,KAAqC,IAAlBa,KAA4Bb,GAAgBc,SACjFJ,GAAmBtF,IAAI9B,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,MAAMQ,IAAIgG,SAC7FgB,EACAO,GACJZ,IAAwBX,KAAqC,IAAlBa,KAA4Bb,GAAgBc,SACnFH,GAAqBvF,IAAI9B,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,MAAMQ,IAAIgG,SAC/FgB,EAEAQ,GAAiBzC,GAAqB9D,GAAwB8D,GAAmBxD,QACjFkG,GAAqBN,IAAmBlG,GAAwBkG,IAAiB9F,QAEjFqG,GAAaC,mBAAQ,WACzB,OAAOxE,GAAcC,GAAYC,GAAcC,MAC9C,CAACF,GAAYC,GAAcC,KACxBsE,GAAqBD,mBAAQ,WACjC,OAAOxE,GAAcC,GAAYC,GAAcC,IAAU,KACxD,CAACF,GAAYC,GAAcC,KAE9B,SAASuE,KACP,IAAMC,EAAI,SAAAC,GAAI,OAAI,kBAACrI,EAAD,KAAWqI,IAE7B,OAAIlB,GAEA,6BACE,6BACGpD,EAAE,gBADL,IACuBqE,EAAE,GAAD,OAAI7F,EAAJ,SADxB,IACgDwB,EAAE,OADlD,IAC2DqE,EAAE,GAAD,OAAI3F,EAAJ,YAAmByD,KAD/E,IAC2FnC,EAAE,aAE7F,kBAACvD,EAAD,KACGuD,EAAE,uBAAwB,IAC1BqE,EAAE,WAAD,OACWE,YACT7E,GAAc0B,EAAkBE,EAAmBzB,IACnD,GACA,GACA,GALF,YAMKsC,KART,KAYA,kBAAC1F,EAAD,KACGuD,EAAE,eADL,IACsBqE,EAAE,GAAD,OAAI7F,IAD3B,IAC2CwB,EAAE,oBAE7C,kBAACvD,EAAD,KAAkBuD,EAAE,oBAKtB,oCACE,6BACGA,EAAE,gBADL,IACuBqE,EAAE,GAAD,OAAIE,YAAgBnD,EAAkB,GAAI,GAA1C,SADxB,IAC8EpB,EAAE,OADhF,IACyF,UAAW,IACjGqE,EAAE,GAAD,OAAIE,YAAgBR,GAAgBlE,GAAU2E,KAAKC,IAAI5E,GAAU,IAAjE,YAAwEsC,KAF5E,IAEwFnC,EAAE,aAE1F,kBAACvD,EAAD,KACGuD,EAAE,eADL,IACsBqE,EAAEE,YAAgBb,GAAiB,GAAI,IAD7D,IACmE1D,EAAE,oBAErE,kBAACvD,EAAD,KACGuD,EAAE,iBADL,IACwBqE,EAAEE,YAAgBhC,GAAiB,GAAI,KAE/D,kBAAC9F,EAAD,KACGuD,EAAE,cADL,IACqBqE,EAAEE,YAAgBV,GAAsB,GAAI,IADjE,QAC2E7D,EAAE,OAAQ,IAClFqE,EAAEE,YAAgBT,GAAwBjE,GAAU2E,KAAKC,IAAI5E,GAAU,KAF1E,IAEiFsC,KAyCzF,IAAMuC,GAAiBC,cA7LwB,8CA+L/C,kCAAAC,EAAA,6DAEMC,EAAsBzD,EAAmB,KAAQ,EAE/C0D,EAAWN,KAAKO,KAAKC,KAAKC,MAAQ,KA9WlB,IA0WxB,SAMkC5C,GAAiB6C,SAASC,aACxD/B,GAAgBvH,SAAOoC,UAAUC,KAAO8F,GACxCZ,GAAgB9B,EAAoByC,GACpCe,EACA,CACErH,MAAO2D,IAXb,OAMQgE,EANR,OAeQC,EAAWC,YAAmBF,EAAmBpJ,GAEvDqG,GACG8C,aACC/B,GAAgBvH,SAAOoC,UAAUC,KAAO8F,GACxCZ,GAAgB9B,EAAoByC,GACpCe,EACA,CACErH,MAAO2D,EACPiE,aAGHzC,MAAK,SAAA2C,GAEJC,IAAQC,MAAM,CACZC,SAAU,cACV1G,OAAQ,gBACR2G,MAAO9G,EACPpB,MAAOoH,EACPe,WAAYL,EAASM,OAEvBL,IAAQC,MAAM,CACZC,SAAU,OACV1G,OAAQuG,EAASM,KACjBF,MAAOd,EAAmBiB,aAE5BpB,GAAea,MAzCrB,4CA/L+C,sBA4O/C,SAASQ,GAActI,GACrB,MAAM,YAAN,OAAmBA,GAGrB+C,qBAAU,WACRuB,IAAsB,GACtB,IAAK,IAAIrI,EAAI,EAAGA,EAAIsM,IAAapM,OAAQF,IACnCsM,IAAatM,GAAGuM,gBAAkBpH,EAAeoH,eACnDlE,IAAsB,KAGzB,CAAClD,IAEJ2B,qBAAU,WACRyB,IAAoB,GACpB,IAAK,IAAIvI,EAAI,EAAGA,EAAIwM,IAAgBtM,OAAQF,IACtCwM,IAAgBxM,GAAGuM,gBAAkBpH,EAAeoH,eACtDhE,IAAoB,KAGvB,CAACpD,IAEJ2B,qBAAU,WACR,GAAI4C,GAAe,CAEjB,GADAvB,KACIrD,EAAY,CACd,IAAM2H,EAAmBtK,SAAOC,MAAMsK,WAAW5H,EAAY,IAC7D6C,EAAoB8E,GAEtB,GAAIzH,EACF,IACE,IAAM2H,EAAoBxK,SAAOC,MAAMsK,WAAW1H,EAAamB,IAC/D0B,EAAqB8E,GACrB,SACAxE,GAAoB,mFAIzB,CAAChC,GAAUrB,EAAY4E,GAAe1E,IAGzC8B,qBAAU,WACR,IACoB,IAAlB4C,IACA5E,GACAyF,IA3cQ,IA4cRrF,IACCiB,IAAyB,IAAbA,IAEb,IACE,IAAMyG,EAAczK,SAAOC,MAAMsK,WAAW5H,EAAY,IAExD,GAAI8H,EAAYC,IAAI1K,SAAOoC,UAAUC,OAASoI,EAAYE,IAAI3K,SAAOoC,UAAUG,YAC7E,MAAMqI,QAGRpF,EAAoBiF,GAEpB,IAAMI,EAAiBzC,GACpBtG,IAAI2I,GACJ/J,IAAIV,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,MAChEQ,IAAIV,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa,GAAK8D,MAQxE,OANA0B,EAAqBmF,GACrBxF,EAA0B,CACxBjC,KAAM,yBACNC,QAAS,CAAEC,MA/dN,EA+dqB1B,MAAO8G,YAAgBmC,EAAgB7G,GAAU2E,KAAKC,IAAI5E,GAAU,IAAI,MAG7F,WACL8B,KACAN,IACAE,IACAL,EAA0B,CACxBjC,KAAM,yBACNC,QAAS,CAAEC,MAxeR,EAweuB1B,MAAO,OAGrC,SACAkE,GAAe3B,EAAE,qBAGpB,CAACxB,EAAY4E,GAAexE,EAAiBqF,GAAYpE,GAAUG,IAGtEQ,qBAAU,WACR,IACoB,IAAlB4C,IACA1E,GACAyF,IAtfS,IAufTvF,IACCiB,IAAyB,IAAbA,IAEb,IACE,IAAMyG,EAAczK,SAAOC,MAAMsK,WAAW1H,EAAamB,IAEzD,GAAIyG,EAAYC,IAAI1K,SAAOoC,UAAUC,OAASoI,EAAYE,IAAI3K,SAAOoC,UAAUG,YAC7E,MAAMqI,QAGRlF,EAAqB+E,GAErB,IAAMI,EAAiBvC,GACpBxG,IAAI2I,GACJ/J,IAAIV,SAAOC,MAAMC,aAAa,IAAI0D,IAAI5D,SAAOC,MAAMC,aAAa8D,MAQnE,OANAwB,EAAoBqF,GACpBxF,EAA0B,CACxBjC,KAAM,yBACNC,QAAS,CAAEC,MA3gBP,EA2gBqB1B,MAAO8G,YAAgBmC,EAAgB,GAAI,GAAG,MAGlE,WACLjF,KACAF,IACAF,IACAH,EAA0B,CACxBjC,KAAM,yBACNC,QAAS,CAAEC,MAphBT,EAohBuB1B,MAAO,OAGpC,SACAgE,GAAczB,EAAE,qBAGnB,CAACtB,EAAa0E,GAAexE,EAAiBuF,GAAoBtE,GAAUG,IAG/EQ,qBAAU,WACJY,GAAoBuC,KAClBvC,EAAiBjD,GAAGwF,IACtBlC,GAAczB,EAAE,wBAEhByB,GAAc,OAIdsC,IAAkBH,KAChBG,GAAe5F,GAAGyF,IACpBjC,GAAe3B,EAAE,wBAEjB2B,GAAe,SAGlB,CAACP,EAAkBuC,GAAcI,GAAgBH,GAAe5D,IAEnE,IAAM2G,GAAYC,YAAoBxG,EAASvB,EAAgBuD,IAE/D,GAAoCjB,oBAAS,GAA7C,qBAAO0F,GAAP,MAAmBC,GAAnB,MACAtG,qBAAU,WACR,GAAIc,GAAqBqF,GAKvB,OAJIA,GAAU3I,GAAGsD,KACfK,GAAe3B,EAAE,oBACjB8G,IAAc,IAET,WACLnF,KACAmF,IAAc,MAGjB,CAACxF,EAAmBqF,GAAW3G,IAElC,IAAM+G,GAAWzJ,GAAU8C,EACrB4G,IACY,OAAfxF,IAAuC,OAAhBE,MAA0BE,KAAqBiF,KAAe/E,GAElFmF,GACe,QAAnBpI,GAA4BA,IAAmBqI,IAAuB7G,GAASrG,eAAe6E,GAEhG,GAAkDsC,oBAAS,GAA3D,qBAAOgG,GAAP,MAA0BC,GAA1B,MASA,OAPA5G,qBAAU,WAEN4G,KADEH,MAKH,CAACA,GAAmBG,KAErB,oCACGD,IACC,kBAACE,EAAA,EAAD,CACEC,UAAW,WACTF,IAAqB,IAEvB9G,eAAgBA,EAChBiH,SAAU1I,IAGd,kBAAC2I,EAAA,EAAD,CACEzM,MAAOiF,EAAE,WACTyH,UAAW9D,IAAgBoC,GAAcxB,YAAgBZ,GAAc,GAAI,IAC3E+D,cAAe,SAAAlJ,GACb0C,EAA0B,CAAEjC,KAAM,eAAgBC,QAAS,CAAEzB,MAAOe,EAAYW,MA/lB5E,MAimBNwI,qBAAsB,WACpB,GAAIhE,GAAc,CAChB,IAAMiE,EAAajE,GAAa9F,IAAIhC,SAAOC,MAAM+L,WAAW,OACxDD,EAAWzJ,GAAGtC,SAAOoC,UAAUC,OACjCgD,EAA0B,CACxBjC,KAAM,eACNC,QAAS,CAAEzB,MAAO8G,YAAgBqD,EAAY,GAAI,IAAI,GAAQzI,MAvmBhE,OA4mBN2I,qBAAqB,MACrBrK,MAAOe,EACPuJ,aAAcvG,GACdwG,oBAAkB,IAEpB,kBAACC,EAAA,EAAD,KACE,kBAACvL,EAAD,KACE,kBAACQ,GAAD,CAAoBI,OAAQyJ,GAAUmB,IAAI,WAG9C,kBAACV,EAAA,EAAD,CACEzM,MAAOiF,EAAE,WACTmI,YAAa/E,GAAgB,GAAK1E,EAAW,WAAOsB,EAAE,aAAT,KAA2B,GACxEyH,UACE7D,IAAiB/D,IAAYkG,GAAcxB,YAAgBX,GAAe/D,GAAU2E,KAAKC,IAAI5E,GAAU,KAEzGS,eAAgBA,EAChBwH,qBAAsBjJ,EACtBuJ,mBAAoB,SAAAvJ,GAClBqC,EAA0B,CAAEjC,KAAM,kBAAmBC,QAASL,KAEhE6I,cAAe,SAAAhJ,GACbwC,EAA0B,CAAEjC,KAAM,eAAgBC,QAAS,CAAEzB,MAAOiB,EAAaS,MAjoB5E,MAmoBPwI,qBAAsB,WAChB/D,IACF1C,EAA0B,CACxBjC,KAAM,eACNC,QAAS,CACPzB,MAAO8G,YAAgBlG,GAAsBuF,IAAgB/D,GAAUA,IAAU,GACjFV,MAzoBD,MA8oBP1B,MAAOiB,EACPmI,WAAYA,GACZkB,aAAcrG,KAEhB,kBAACuG,EAAA,EAAD,CAAgBI,YAAU,GACxB,kBAACzL,EAAD,KACE,kBAACE,GAAD,KACE,kBAACE,GAAD,KAAegD,EAAE,iBACjB,8BAAOiE,GAAU,kBAAcM,YAAgBN,GAAY,GAAI,GAA9C,YAAoD9B,IAAW,QAElF,kBAACrF,GAAD,KACE,kBAACE,GAAD,KAAegD,EAAE,oBACjB,8BACGiD,IAAsBC,GAAtB,UACMqB,YAAgBtB,GAAoB,GAAI,GAD9C,kBAC0DsB,YACrDrB,GACArD,GACA2E,KAAKC,IAAI,EAAG5E,KAJjB,YAKQsC,IACL,QAGR,kBAACrF,GAAD,KACE,kBAACE,GAAD,KACGgD,EAAE,iBADL,KACyBiD,IAAsBsB,YAAgBjB,GAAqB,GAAI,GADxF,MAGA,8BACGE,IAAYC,GAAZ,UACMc,YAAgBf,GAAU,GAAI,GADpC,kBACgDe,YAC3Cd,GACA5D,GACA2E,KAAKC,IAAI,EAAG5E,KAJjB,YAKQsC,IACL,UAnWhB,WACE,IAAImG,EAAiB,GACjBnL,GAAU,EAqBd,OApBI2E,IACFwG,EAAiBtI,EAAE,eACnB7C,GAAU,GACD6E,IACTsG,EAAiBtI,EAAE,aACnB7C,GAAU,GACDyE,GACT0G,EAAiB1G,GACRJ,IAAcE,IACvB4G,EAAiB9G,IAAcE,GAC/BvE,GAAU,GACkB0B,EAElBL,EAEA4B,IACVkI,EAAiBtI,EAAE,YACnB7C,GAAU,GAHVmL,EAAiBtI,EAAE,kBAFnBsI,EAAiBtI,EAAE,mBASnB,kBAACuI,EAAA,EAAD,CACEC,gBAAiBxI,EAAE,sBACnByI,iBAAkBzI,EAAE,eACpBsI,eAAgBA,EAChBnL,QAASA,EACTiH,yBAA0BA,KA2U3BsE,GACAtF,GACC,kBAAC9G,EAAD,KACE,kBAACE,EAAD,KACE,0BAAMmM,KAAK,MAAMC,aAAW,mBAA5B,gBAEQ,IACP5I,EAAE,mBAEL,kBAACxD,EAAD,CAAwBqM,MAAO,CAAEC,UAAW,SACzC9I,EAAE,sBAAuB,CAAEmC,cAG9B,KACHiB,IACC,kBAAC5G,EAAD,CAAwBqM,MAAO,CAAEE,UAAW,SAAUD,UAAW,SAC9D9I,EAAE,mBAGP,kBAAC/C,GAAD,KACE,kBAAC,IAAD,CAAQ+L,UAAWhC,GAASiC,QAvhBa,6CAwhBtCjJ,EAAE,qB,uNCxtBPkJ,EAAiBhN,IAAOK,IAAV,oIACT,gBAAG4M,EAAH,EAAGA,MAAO/M,EAAV,EAAUA,MAAV,OAAuB+M,EAAQ/M,EAAMgN,UAAYhN,EAAMW,YAO5DsM,EAAUnN,IAAOK,IAAV,8IACS,qBAAGH,MAAkBkN,gBAOrCC,EAA0BrN,IAAOK,IAAV,yTACzB,qBAAGH,MAAkBO,iBACd,qBAAGP,MAAkBC,aAoB1BmN,EAAgBtN,aADA,SAAC,GAAD,EAAGiB,QAAH,EAAYC,oBAAZ,IAAoCC,EAApC,wBAA+C,kBAAC,IAAWA,KAC3DnB,CAAH,6DAEL,qBAAGE,MAAkBC,aAK7BoN,EAAkBvN,aADA,SAAC,GAAD,EAAGiB,QAAH,EAAYC,oBAAZ,IAAoCC,EAApC,wBAA+C,kBAAC,IAAaA,KAC7DnB,CAAH,6DAEP,qBAAGE,MAAkBC,aAI7BkM,E,4MAgBJhK,MAAQ,CACNmL,aAAa,G,mDAGf,WACE,OAAKvP,KAAKoE,MAAMmL,YAIT,kBAACL,EAAD,KAAUlP,KAAKa,MAAMoJ,4BAHnB,O,oBAMX,WAAU,IAAD,OACP,EAAuEjK,KAAKa,MAApEwN,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,iBAAkBH,EAA3C,EAA2CA,eAAgBnL,EAA3D,EAA2DA,QAE3D,OAAImL,EACK,kBAACY,EAAD,CAAgBC,MAAOhM,GAAUmL,GAIxC,oCACE,kBAACiB,EAAD,CACEN,QAAS,YACN,EAAK1K,MAAMmL,aACVlE,IAAQC,MAAM,CACZC,SAAU,uBACV1G,OAAQ,wBACR2G,MAAO,sBAEX,EAAKgE,UAAS,SAAAC,GACZ,MAAO,CAAEF,aAAcE,EAAUF,kBAInCvP,KAAKoE,MAAMmL,YAMX,oCACE,8BAAOjB,GACP,kBAACgB,EAAD,OAPF,oCACE,8BAAOjB,GACP,kBAACgB,EAAD,QASLrP,KAAK0P,qB,GA9DeC,aAAvBvB,EAQGwB,aAAe,CACpBvB,gBAAiB,mBACjBC,iBAAkB,gBAClBrE,yBAHoB,aAIpBkE,eAAgB,GAChBnL,SAAS,GAuDEoL","file":"static/js/16.657f77b4.chunk.js","sourcesContent":["var _path;\n\nvar _excluded = [\"svgRef\", \"title\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgPlusBlue = function SvgPlusBlue(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 12,\n    viewBox: \"0 0 12 12\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1 6H6M11 6L6 6M6 1V6M6 6L6 11\",\n    stroke: \"#2F80ED\",\n    strokeLinecap: \"round\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPlusBlue, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/plus-blue.e8021e51.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useReducer, useState, useCallback, useEffect, useMemo } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { createBrowserHistory } from 'history'\nimport { ethers } from 'ethers'\nimport ReactGA from 'react-ga'\nimport styled from 'styled-components'\n\nimport { Button } from '../../theme'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport OversizedPanel from '../../components/OversizedPanel'\nimport ContextualInfo from '../../components/ContextualInfo'\nimport { ReactComponent as Plus } from '../../assets/images/plus-blue.svg'\nimport WarningCard from '../../components/WarningCard'\n\nimport { useWeb3React, useExchangeContract } from '../../hooks'\nimport { brokenTokens, broken777Tokens } from '../../constants'\nimport { amountFormatter, calculateGasMargin } from '../../utils'\nimport { useTransactionAdder } from '../../contexts/Transactions'\nimport { useTokenDetails, INITIAL_TOKENS_CONTEXT } from '../../contexts/Tokens'\nimport { useAddressBalance, useExchangeReserves } from '../../contexts/Balances'\nimport { useAddressAllowance } from '../../contexts/Allowances'\n\nconst INPUT = 0\nconst OUTPUT = 1\n\n// denominated in bips\nconst ALLOWED_SLIPPAGE = ethers.utils.bigNumberify(200)\n\n// denominated in seconds\nconst DEADLINE_FROM_NOW = 60 * 15\n\n// denominated in bips\nconst GAS_MARGIN = ethers.utils.bigNumberify(1000)\n\nconst BlueSpan = styled.span`\n  color: ${({ theme }) => theme.royalBlue};\n`\n\nconst NewExchangeWarning = styled.div`\n  margin-top: 1rem;\n  padding: 1rem;\n\n  border: 1px solid rgba($pizazz-orange, 0.4);\n  background-color: rgba($pizazz-orange, 0.1);\n  border-radius: 1rem;\n`\n\nconst NewExchangeWarningText = styled.div`\n  font-size: 0.8rem;\n  line-height: 1rem;\n  text-align: center;\n\n  :first-child {\n    padding-bottom: 0.3rem;\n    font-weight: 500;\n  }\n`\n\nconst LastSummaryText = styled.div`\n  margin-top: 1rem;\n`\n\nconst DownArrowBackground = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  justify-content: center;\n  align-items: center;\n`\nconst SummaryPanel = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap}\n  padding: 1rem 0;\n`\n\nconst ExchangeRateWrapper = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  align-items: center;\n  color: ${({ theme }) => theme.doveGray};\n  font-size: 0.75rem;\n  padding: 0.25rem 1rem 0;\n`\n\nconst ExchangeRate = styled.span`\n  flex: 1 1 auto;\n  width: 0;\n  color: ${({ theme }) => theme.doveGray};\n`\n\nconst Flex = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 2rem;\n\n  button {\n    max-width: 20rem;\n  }\n`\n\nconst WrappedPlus = ({ isError, highSlippageWarning, ...rest }) => <Plus {...rest} />\nconst ColoredWrappedPlus = styled(WrappedPlus)`\n  width: 0.625rem;\n  height: 0.625rem;\n  position: relative;\n  padding: 0.875rem;\n  path {\n    stroke: ${({ active, theme }) => (active ? theme.royalBlue : theme.chaliceGray)};\n  }\n`\n\nfunction calculateSlippageBounds(value) {\n  if (value) {\n    const offset = value.mul(ALLOWED_SLIPPAGE).div(ethers.utils.bigNumberify(10000))\n    const minimum = value.sub(offset)\n    const maximum = value.add(offset)\n    return {\n      minimum: minimum.lt(ethers.constants.Zero) ? ethers.constants.Zero : minimum,\n      maximum: maximum.gt(ethers.constants.MaxUint256) ? ethers.constants.MaxUint256 : maximum\n    }\n  } else {\n    return {}\n  }\n}\n\nfunction calculateMaxOutputVal(value) {\n  if (value) {\n    return value.mul(ethers.utils.bigNumberify(10000)).div(ALLOWED_SLIPPAGE.add(ethers.utils.bigNumberify(10000)))\n  }\n}\n\nfunction initialAddLiquidityState(state) {\n  return {\n    inputValue: state.ethAmountURL ? state.ethAmountURL : '',\n    outputValue: state.tokenAmountURL && !state.ethAmountURL ? state.tokenAmountURL : '',\n    lastEditedField: state.tokenAmountURL && state.ethAmountURL === '' ? OUTPUT : INPUT,\n    outputCurrency: state.tokenURL ? state.tokenURL : ''\n  }\n}\n\nfunction addLiquidityStateReducer(state, action) {\n  switch (action.type) {\n    case 'SELECT_CURRENCY': {\n      return {\n        ...state,\n        outputCurrency: action.payload\n      }\n    }\n    case 'UPDATE_VALUE': {\n      const { inputValue, outputValue } = state\n      const { field, value } = action.payload\n      return {\n        ...state,\n        inputValue: field === INPUT ? value : inputValue,\n        outputValue: field === OUTPUT ? value : outputValue,\n        lastEditedField: field\n      }\n    }\n    case 'UPDATE_DEPENDENT_VALUE': {\n      const { inputValue, outputValue } = state\n      const { field, value } = action.payload\n      return {\n        ...state,\n        inputValue: field === INPUT ? value : inputValue,\n        outputValue: field === OUTPUT ? value : outputValue\n      }\n    }\n    default: {\n      return initialAddLiquidityState()\n    }\n  }\n}\n\nfunction getExchangeRate(inputValue, inputDecimals, outputValue, outputDecimals, invert = false) {\n  try {\n    if (\n      inputValue &&\n      (inputDecimals || inputDecimals === 0) &&\n      outputValue &&\n      (outputDecimals || outputDecimals === 0)\n    ) {\n      const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\n\n      if (invert) {\n        return inputValue\n          .mul(factor)\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\n          .div(outputValue)\n      } else {\n        return outputValue\n          .mul(factor)\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\n          .div(inputValue)\n      }\n    }\n  } catch {}\n}\n\nfunction getMarketRate(reserveETH, reserveToken, decimals, invert = false) {\n  return getExchangeRate(reserveETH, 18, reserveToken, decimals, invert)\n}\n\nexport default function AddLiquidity({ params }) {\n  const { t } = useTranslation()\n  const { library, account, active, chainId } = useWeb3React()\n\n  const urlAddedTokens = {}\n  if (params.token) {\n    urlAddedTokens[params.token] = true\n  }\n\n  // clear url of query\n  useEffect(() => {\n    const history = createBrowserHistory()\n    history.push(window.location.pathname + '')\n  }, [])\n\n  const [addLiquidityState, dispatchAddLiquidityState] = useReducer(\n    addLiquidityStateReducer,\n    { ethAmountURL: params.ethAmount, tokenAmountURL: params.tokenAmount, tokenURL: params.token },\n    initialAddLiquidityState\n  )\n  const { inputValue, outputValue, lastEditedField, outputCurrency } = addLiquidityState\n  const inputCurrency = 'BNB'\n\n  const [inputValueParsed, setInputValueParsed] = useState()\n  const [outputValueParsed, setOutputValueParsed] = useState()\n  const [inputError, setInputError] = useState()\n  const [outputError, setOutputError] = useState()\n  const [zeroDecimalError, setZeroDecimalError] = useState()\n\n  const [brokenTokenWarning, setBrokenTokenWarning] = useState()\n  const [broken777Warning, setBroken777Warning] = useState()\n\n  const { symbol, decimals, exchangeAddress } = useTokenDetails(outputCurrency)\n  const exchangeContract = useExchangeContract(exchangeAddress)\n\n  const [totalPoolTokens, setTotalPoolTokens] = useState()\n  const fetchPoolTokens = useCallback(() => {\n    if (exchangeContract) {\n      exchangeContract.totalSupply().then(totalSupply => {\n        setTotalPoolTokens(totalSupply)\n      })\n    }\n  }, [exchangeContract])\n  useEffect(() => {\n    fetchPoolTokens()\n    library.on('block', fetchPoolTokens)\n\n    return () => {\n      library.removeListener('block', fetchPoolTokens)\n    }\n  }, [fetchPoolTokens, library])\n\n  const poolTokenBalance = useAddressBalance(account, exchangeAddress)\n  const exchangeETHBalance = useAddressBalance(exchangeAddress, 'BNB')\n  const exchangeTokenBalance = useAddressBalance(exchangeAddress, outputCurrency)\n\n  const { reserveETH, reserveToken } = useExchangeReserves(outputCurrency)\n  const isNewExchange = !!(reserveETH && reserveToken && reserveETH.isZero() && reserveToken.isZero())\n\n  // 18 decimals\n  const poolTokenPercentage =\n    poolTokenBalance && totalPoolTokens && isNewExchange === false && !totalPoolTokens.isZero()\n      ? poolTokenBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))).div(totalPoolTokens)\n      : undefined\n  const ethShare =\n    exchangeETHBalance && poolTokenPercentage\n      ? exchangeETHBalance\n          .mul(poolTokenPercentage)\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n      : undefined\n  const tokenShare =\n    exchangeTokenBalance && poolTokenPercentage\n      ? exchangeTokenBalance\n          .mul(poolTokenPercentage)\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n      : undefined\n\n  const liquidityMinted = isNewExchange\n    ? inputValueParsed\n    : totalPoolTokens && inputValueParsed && exchangeETHBalance && !exchangeETHBalance.isZero()\n    ? totalPoolTokens.mul(inputValueParsed).div(exchangeETHBalance)\n    : undefined\n\n  // user balances\n  const inputBalance = useAddressBalance(account, inputCurrency)\n  const outputBalance = useAddressBalance(account, outputCurrency)\n\n  const ethPerLiquidityToken =\n    exchangeETHBalance && totalPoolTokens && isNewExchange === false && !totalPoolTokens.isZero()\n      ? exchangeETHBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))).div(totalPoolTokens)\n      : undefined\n  const tokenPerLiquidityToken =\n    exchangeTokenBalance && totalPoolTokens && isNewExchange === false && !totalPoolTokens.isZero()\n      ? exchangeTokenBalance.mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))).div(totalPoolTokens)\n      : undefined\n\n  const outputValueMax = outputValueParsed && calculateSlippageBounds(outputValueParsed).maximum\n  const liquidityTokensMin = liquidityMinted && calculateSlippageBounds(liquidityMinted).minimum\n\n  const marketRate = useMemo(() => {\n    return getMarketRate(reserveETH, reserveToken, decimals)\n  }, [reserveETH, reserveToken, decimals])\n  const marketRateInverted = useMemo(() => {\n    return getMarketRate(reserveETH, reserveToken, decimals, true)\n  }, [reserveETH, reserveToken, decimals])\n\n  function renderTransactionDetails() {\n    const b = text => <BlueSpan>{text}</BlueSpan>\n\n    if (isNewExchange) {\n      return (\n        <div>\n          <div>\n            {t('youAreAdding')} {b(`${inputValue} BNB`)} {t('and')} {b(`${outputValue} ${symbol}`)} {t('intoPool')}\n          </div>\n          <LastSummaryText>\n            {t('youAreSettingExRate')}{' '}\n            {b(\n              `1 BNB = ${amountFormatter(\n                getMarketRate(inputValueParsed, outputValueParsed, decimals),\n                18,\n                4,\n                false\n              )} ${symbol}`\n            )}\n            .\n          </LastSummaryText>\n          <LastSummaryText>\n            {t('youWillMint')} {b(`${inputValue}`)} {t('liquidityTokens')}\n          </LastSummaryText>\n          <LastSummaryText>{t('totalSupplyIs0')}</LastSummaryText>\n        </div>\n      )\n    } else {\n      return (\n        <>\n          <div>\n            {t('youAreAdding')} {b(`${amountFormatter(inputValueParsed, 18, 4)} BNB`)} {t('and')} {'at most'}{' '}\n            {b(`${amountFormatter(outputValueMax, decimals, Math.min(decimals, 4))} ${symbol}`)} {t('intoPool')}\n          </div>\n          <LastSummaryText>\n            {t('youWillMint')} {b(amountFormatter(liquidityMinted, 18, 4))} {t('liquidityTokens')}\n          </LastSummaryText>\n          <LastSummaryText>\n            {t('totalSupplyIs')} {b(amountFormatter(totalPoolTokens, 18, 4))}\n          </LastSummaryText>\n          <LastSummaryText>\n            {t('tokenWorth')} {b(amountFormatter(ethPerLiquidityToken, 18, 4))} BNB {t('and')}{' '}\n            {b(amountFormatter(tokenPerLiquidityToken, decimals, Math.min(decimals, 4)))} {symbol}\n          </LastSummaryText>\n        </>\n      )\n    }\n  }\n\n  function renderSummary() {\n    let contextualInfo = ''\n    let isError = false\n    if (brokenTokenWarning) {\n      contextualInfo = t('brokenToken')\n      isError = true\n    } else if (broken777Warning) {\n      contextualInfo = t('broken777')\n      isError = true\n    } else if (zeroDecimalError) {\n      contextualInfo = zeroDecimalError\n    } else if (inputError || outputError) {\n      contextualInfo = inputError || outputError\n      isError = true\n    } else if (!inputCurrency || !outputCurrency) {\n      contextualInfo = t('selectTokenCont')\n    } else if (!inputValue) {\n      contextualInfo = t('enterValueCont')\n    } else if (!account) {\n      contextualInfo = t('noWallet')\n      isError = true\n    }\n\n    return (\n      <ContextualInfo\n        openDetailsText={t('transactionDetails')}\n        closeDetailsText={t('hideDetails')}\n        contextualInfo={contextualInfo}\n        isError={isError}\n        renderTransactionDetails={renderTransactionDetails}\n      />\n    )\n  }\n\n  const addTransaction = useTransactionAdder()\n\n  async function onAddLiquidity() {\n    // take BNB amount, multiplied by BNB rate and 2 for total tx size\n    let ethTransactionSize = (inputValueParsed / 1e18) * 2\n\n    const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW\n\n    const estimatedGasLimit = await exchangeContract.estimate.addLiquidity(\n      isNewExchange ? ethers.constants.Zero : liquidityTokensMin,\n      isNewExchange ? outputValueParsed : outputValueMax,\n      deadline,\n      {\n        value: inputValueParsed\n      }\n    )\n\n    const gasLimit = calculateGasMargin(estimatedGasLimit, GAS_MARGIN)\n\n    exchangeContract\n      .addLiquidity(\n        isNewExchange ? ethers.constants.Zero : liquidityTokensMin,\n        isNewExchange ? outputValueParsed : outputValueMax,\n        deadline,\n        {\n          value: inputValueParsed,\n          gasLimit\n        }\n      )\n      .then(response => {\n        // log pool added to and total usd amount\n        ReactGA.event({\n          category: 'Transaction',\n          action: 'Add Liquidity',\n          label: outputCurrency,\n          value: ethTransactionSize,\n          dimension1: response.hash\n        })\n        ReactGA.event({\n          category: 'Hash',\n          action: response.hash,\n          label: ethTransactionSize.toString()\n        })\n        addTransaction(response)\n      })\n  }\n\n  function formatBalance(value) {\n    return `Balance: ${value}`\n  }\n\n  useEffect(() => {\n    setBrokenTokenWarning(false)\n    for (let i = 0; i < brokenTokens.length; i++) {\n      if (brokenTokens[i].toLowerCase() === outputCurrency.toLowerCase()) {\n        setBrokenTokenWarning(true)\n      }\n    }\n  }, [outputCurrency])\n\n  useEffect(() => {\n    setBroken777Warning(false)\n    for (let i = 0; i < broken777Tokens.length; i++) {\n      if (broken777Tokens[i].toLowerCase() === outputCurrency.toLowerCase()) {\n        setBroken777Warning(true)\n      }\n    }\n  }, [outputCurrency])\n\n  useEffect(() => {\n    if (isNewExchange) {\n      setZeroDecimalError()\n      if (inputValue) {\n        const parsedInputValue = ethers.utils.parseUnits(inputValue, 18)\n        setInputValueParsed(parsedInputValue)\n      }\n      if (outputValue) {\n        try {\n          const parsedOutputValue = ethers.utils.parseUnits(outputValue, decimals)\n          setOutputValueParsed(parsedOutputValue)\n        } catch {\n          setZeroDecimalError('Invalid input. For 0 decimal tokens only supply whole number token amounts.')\n        }\n      }\n    }\n  }, [decimals, inputValue, isNewExchange, outputValue])\n\n  // parse input value\n  useEffect(() => {\n    if (\n      isNewExchange === false &&\n      inputValue &&\n      marketRate &&\n      lastEditedField === INPUT &&\n      (decimals || decimals === 0)\n    ) {\n      try {\n        const parsedValue = ethers.utils.parseUnits(inputValue, 18)\n\n        if (parsedValue.lte(ethers.constants.Zero) || parsedValue.gte(ethers.constants.MaxUint256)) {\n          throw Error()\n        }\n\n        setInputValueParsed(parsedValue)\n\n        const currencyAmount = marketRate\n          .mul(parsedValue)\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18 - decimals)))\n\n        setOutputValueParsed(currencyAmount)\n        dispatchAddLiquidityState({\n          type: 'UPDATE_DEPENDENT_VALUE',\n          payload: { field: OUTPUT, value: amountFormatter(currencyAmount, decimals, Math.min(decimals, 4), false) }\n        })\n\n        return () => {\n          setOutputError()\n          setInputValueParsed()\n          setOutputValueParsed()\n          dispatchAddLiquidityState({\n            type: 'UPDATE_DEPENDENT_VALUE',\n            payload: { field: OUTPUT, value: '' }\n          })\n        }\n      } catch {\n        setOutputError(t('inputNotValid'))\n      }\n    }\n  }, [inputValue, isNewExchange, lastEditedField, marketRate, decimals, t])\n\n  // parse output value\n  useEffect(() => {\n    if (\n      isNewExchange === false &&\n      outputValue &&\n      marketRateInverted &&\n      lastEditedField === OUTPUT &&\n      (decimals || decimals === 0)\n    ) {\n      try {\n        const parsedValue = ethers.utils.parseUnits(outputValue, decimals)\n\n        if (parsedValue.lte(ethers.constants.Zero) || parsedValue.gte(ethers.constants.MaxUint256)) {\n          throw Error()\n        }\n\n        setOutputValueParsed(parsedValue)\n\n        const currencyAmount = marketRateInverted\n          .mul(parsedValue)\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(decimals)))\n\n        setInputValueParsed(currencyAmount)\n        dispatchAddLiquidityState({\n          type: 'UPDATE_DEPENDENT_VALUE',\n          payload: { field: INPUT, value: amountFormatter(currencyAmount, 18, 4, false) }\n        })\n\n        return () => {\n          setInputError()\n          setOutputValueParsed()\n          setInputValueParsed()\n          dispatchAddLiquidityState({\n            type: 'UPDATE_DEPENDENT_VALUE',\n            payload: { field: INPUT, value: '' }\n          })\n        }\n      } catch {\n        setInputError(t('inputNotValid'))\n      }\n    }\n  }, [outputValue, isNewExchange, lastEditedField, marketRateInverted, decimals, t])\n\n  // input validation\n  useEffect(() => {\n    if (inputValueParsed && inputBalance) {\n      if (inputValueParsed.gt(inputBalance)) {\n        setInputError(t('insufficientBalance'))\n      } else {\n        setInputError(null)\n      }\n    }\n\n    if (outputValueMax && outputBalance) {\n      if (outputValueMax.gt(outputBalance)) {\n        setOutputError(t('insufficientBalance'))\n      } else {\n        setOutputError(null)\n      }\n    }\n  }, [inputValueParsed, inputBalance, outputValueMax, outputBalance, t])\n\n  const allowance = useAddressAllowance(account, outputCurrency, exchangeAddress)\n\n  const [showUnlock, setShowUnlock] = useState(false)\n  useEffect(() => {\n    if (outputValueParsed && allowance) {\n      if (allowance.lt(outputValueParsed)) {\n        setOutputError(t('unlockTokenCont'))\n        setShowUnlock(true)\n      }\n      return () => {\n        setOutputError()\n        setShowUnlock(false)\n      }\n    }\n  }, [outputValueParsed, allowance, t])\n\n  const isActive = active && account\n  const isValid =\n    (inputError === null || outputError === null) && !zeroDecimalError && !showUnlock && !brokenTokenWarning\n\n  const newOutputDetected =\n    outputCurrency !== 'BNB' && outputCurrency && !INITIAL_TOKENS_CONTEXT[chainId].hasOwnProperty(outputCurrency)\n\n  const [showOutputWarning, setShowOutputWarning] = useState(false)\n\n  useEffect(() => {\n    if (newOutputDetected) {\n      setShowOutputWarning(true)\n    } else {\n      setShowOutputWarning(false)\n    }\n  }, [newOutputDetected, setShowOutputWarning])\n  return (\n    <>\n      {showOutputWarning && (\n        <WarningCard\n          onDismiss={() => {\n            setShowOutputWarning(false)\n          }}\n          urlAddedTokens={urlAddedTokens}\n          currency={outputCurrency}\n        />\n      )}\n      <CurrencyInputPanel\n        title={t('deposit')}\n        extraText={inputBalance && formatBalance(amountFormatter(inputBalance, 18, 4))}\n        onValueChange={inputValue => {\n          dispatchAddLiquidityState({ type: 'UPDATE_VALUE', payload: { value: inputValue, field: INPUT } })\n        }}\n        extraTextClickHander={() => {\n          if (inputBalance) {\n            const valueToSet = inputBalance.sub(ethers.utils.parseEther('.1'))\n            if (valueToSet.gt(ethers.constants.Zero)) {\n              dispatchAddLiquidityState({\n                type: 'UPDATE_VALUE',\n                payload: { value: amountFormatter(valueToSet, 18, 18, false), field: INPUT }\n              })\n            }\n          }\n        }}\n        selectedTokenAddress=\"BNB\"\n        value={inputValue}\n        errorMessage={inputError}\n        disableTokenSelect\n      />\n      <OversizedPanel>\n        <DownArrowBackground>\n          <ColoredWrappedPlus active={isActive} alt=\"plus\" />\n        </DownArrowBackground>\n      </OversizedPanel>\n      <CurrencyInputPanel\n        title={t('deposit')}\n        description={isNewExchange ? '' : outputValue ? `(${t('estimated')})` : ''}\n        extraText={\n          outputBalance && decimals && formatBalance(amountFormatter(outputBalance, decimals, Math.min(decimals, 4)))\n        }\n        urlAddedTokens={urlAddedTokens}\n        selectedTokenAddress={outputCurrency}\n        onCurrencySelected={outputCurrency => {\n          dispatchAddLiquidityState({ type: 'SELECT_CURRENCY', payload: outputCurrency })\n        }}\n        onValueChange={outputValue => {\n          dispatchAddLiquidityState({ type: 'UPDATE_VALUE', payload: { value: outputValue, field: OUTPUT } })\n        }}\n        extraTextClickHander={() => {\n          if (outputBalance) {\n            dispatchAddLiquidityState({\n              type: 'UPDATE_VALUE',\n              payload: {\n                value: amountFormatter(calculateMaxOutputVal(outputBalance), decimals, decimals, false),\n                field: OUTPUT\n              }\n            })\n          }\n        }}\n        value={outputValue}\n        showUnlock={showUnlock}\n        errorMessage={outputError}\n      />\n      <OversizedPanel hideBottom>\n        <SummaryPanel>\n          <ExchangeRateWrapper>\n            <ExchangeRate>{t('exchangeRate')}</ExchangeRate>\n            <span>{marketRate ? `1 BNB = ${amountFormatter(marketRate, 18, 4)} ${symbol}` : ' - '}</span>\n          </ExchangeRateWrapper>\n          <ExchangeRateWrapper>\n            <ExchangeRate>{t('currentPoolSize')}</ExchangeRate>\n            <span>\n              {exchangeETHBalance && exchangeTokenBalance\n                ? `${amountFormatter(exchangeETHBalance, 18, 4)} BNB + ${amountFormatter(\n                    exchangeTokenBalance,\n                    decimals,\n                    Math.min(4, decimals)\n                  )} ${symbol}`\n                : ' - '}\n            </span>\n          </ExchangeRateWrapper>\n          <ExchangeRateWrapper>\n            <ExchangeRate>\n              {t('yourPoolShare')} ({exchangeETHBalance && amountFormatter(poolTokenPercentage, 16, 2)}%)\n            </ExchangeRate>\n            <span>\n              {ethShare && tokenShare\n                ? `${amountFormatter(ethShare, 18, 4)} BNB + ${amountFormatter(\n                    tokenShare,\n                    decimals,\n                    Math.min(4, decimals)\n                  )} ${symbol}`\n                : ' - '}\n            </span>\n          </ExchangeRateWrapper>\n        </SummaryPanel>\n      </OversizedPanel>\n      {renderSummary()}\n      {isNewExchange ? (\n        <NewExchangeWarning>\n          <NewExchangeWarningText>\n            <span role=\"img\" aria-label=\"first-liquidity\">\n              🚰\n            </span>{' '}\n            {t('firstLiquidity')}\n          </NewExchangeWarningText>\n          <NewExchangeWarningText style={{ marginTop: '10px' }}>\n            {t('initialExchangeRate', { symbol })}\n          </NewExchangeWarningText>\n        </NewExchangeWarning>\n      ) : null}\n      {isNewExchange && (\n        <NewExchangeWarningText style={{ textAlign: 'center', marginTop: '10px' }}>\n          {t('initialWarning')}\n        </NewExchangeWarningText>\n      )}\n      <Flex>\n        <Button disabled={!isValid} onClick={onAddLiquidity}>\n          {t('addLiquidity')}\n        </Button>\n      </Flex>\n    </>\n  )\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport ReactGA from 'react-ga'\nimport { ReactComponent as Dropup } from '../../assets/images/dropup-blue.svg'\nimport { ReactComponent as Dropdown } from '../../assets/images/dropdown-blue.svg'\n\nconst SummaryWrapper = styled.div`\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.doveGray)};\n  font-size: 0.75rem;\n  text-align: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n`\n\nconst Details = styled.div`\n  background-color: ${({ theme }) => theme.concreteGray};\n  padding: 1.5rem;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  margin-top: 1rem;\n`\n\nconst SummaryWrapperContainer = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  color: ${({ theme }) => theme.royalBlue};\n  text-align: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  cursor: pointer;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n\n  span {\n    margin-right: 12px;\n  }\n\n  img {\n    height: 0.75rem;\n    width: 0.75rem;\n  }\n`\n\nconst WrappedDropup = ({ isError, highSlippageWarning, ...rest }) => <Dropup {...rest} />\nconst ColoredDropup = styled(WrappedDropup)`\n  path {\n    stroke: ${({ theme }) => theme.royalBlue};\n  }\n`\n\nconst WrappedDropdown = ({ isError, highSlippageWarning, ...rest }) => <Dropdown {...rest} />\nconst ColoredDropdown = styled(WrappedDropdown)`\n  path {\n    stroke: ${({ theme }) => theme.royalBlue};\n  }\n`\n\nclass ContextualInfo extends Component {\n  static propTypes = {\n    openDetailsText: PropTypes.string,\n    renderTransactionDetails: PropTypes.func,\n    contextualInfo: PropTypes.string,\n    isError: PropTypes.bool\n  }\n\n  static defaultProps = {\n    openDetailsText: 'Advanced Details',\n    closeDetailsText: 'Hide Advanced',\n    renderTransactionDetails() {},\n    contextualInfo: '',\n    isError: false\n  }\n\n  state = {\n    showDetails: false\n  }\n\n  renderDetails() {\n    if (!this.state.showDetails) {\n      return null\n    }\n\n    return <Details>{this.props.renderTransactionDetails()}</Details>\n  }\n\n  render() {\n    const { openDetailsText, closeDetailsText, contextualInfo, isError } = this.props\n\n    if (contextualInfo) {\n      return <SummaryWrapper error={isError}>{contextualInfo}</SummaryWrapper>\n    }\n\n    return (\n      <>\n        <SummaryWrapperContainer\n          onClick={() => {\n            !this.state.showDetails &&\n              ReactGA.event({\n                category: 'Advanced Interaction',\n                action: 'Open Advanced Details',\n                label: 'Pool Page Details'\n              })\n            this.setState(prevState => {\n              return { showDetails: !prevState.showDetails }\n            })\n          }}\n        >\n          {!this.state.showDetails ? (\n            <>\n              <span>{openDetailsText}</span>\n              <ColoredDropup />\n            </>\n          ) : (\n            <>\n              <span>{closeDetailsText}</span>\n              <ColoredDropdown />\n            </>\n          )}\n        </SummaryWrapperContainer>\n        {this.renderDetails()}\n      </>\n    )\n  }\n}\n\nexport default ContextualInfo\n"],"sourceRoot":""}